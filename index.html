<!DOCTYPE html>
<html lang="vi" class="notranslate" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Master - AI Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0f0c29; --primary: #00d2ff; --secondary: #928dab;
            --accent: #3a7bd5; --neon-purple: #bc13fe; --glass: rgba(255, 255, 255, 0.05);
        }
        * { box-sizing: border-box; user-select: none; }
        body {
            margin: 0; font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white; height: 100vh; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }
        .container {
            width: 90%; max-width: 900px; background: var(--glass);
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px; padding: 30px; box-shadow: 0 0 20px rgba(188, 19, 254, 0.3);
            position: relative; text-align: center; z-index: 5;
        }
        .screen { display: none; animation: fadeIn 0.5s ease; }
        .screen.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        h1, h2, h3 { font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 10px var(--primary); }
        .btn {
            background: linear-gradient(90deg, var(--accent), var(--neon-purple));
            border: none; padding: 12px 30px; color: white; font-family: 'Orbitron';
            cursor: pointer; border-radius: 50px; transition: 0.3s; margin: 10px;
        }
        .btn:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--neon-purple); }
        input { background: rgba(0,0,0,0.5); border: 1px solid var(--primary); color: white; padding: 12px; border-radius: 10px; width: 80%; margin: 10px 0; outline: none; }
        
        /* AI Bot Styles */
        #ai-bot {
            position: fixed; bottom: 20px; right: 20px; width: 300px;
            background: rgba(15, 12, 41, 0.95); border: 2px solid var(--primary);
            border-radius: 15px; padding: 15px; z-index: 1000; box-shadow: 0 0 20px var(--primary);
            display: none; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .bot-header { font-family: 'Orbitron'; font-size: 0.8rem; color: var(--primary); border-bottom: 1px solid #333; margin-bottom: 10px; display: flex; justify-content: space-between; }
        #ai-content { font-size: 0.95rem; line-height: 1.4; color: #fff; text-shadow: 0 0 5px rgba(0,210,255,0.5); }
        
        /* HUD & Game */
        .hud { display: flex; justify-content: space-between; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 15px; margin-bottom: 20px; font-family: 'Orbitron'; border-bottom: 2px solid var(--primary); }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .option-card { background: rgba(255,255,255,0.05); border: 1px solid var(--secondary); padding: 15px; border-radius: 10px; cursor: pointer; transition: 0.2s; }
        .option-card:hover { background: rgba(0, 210, 255, 0.2); border-color: var(--primary); }
        .monitor-table { width: 100%; border-collapse: collapse; font-size: 0.8rem; margin-top: 10px; }
        .monitor-table th, td { padding: 8px; border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body>

    <div id="ai-bot">
        <div class="bot-header"><span>ü§ñ CYBER-AI ASSISTANT</span><span id="bot-status">‚óè Online</span></div>
        <div id="ai-content">ƒêang kh·ªüi ƒë·ªông h·ªá th·ªëng nh·∫≠n di·ªán...</div>
    </div>

    <div class="container">
        <div id="login-screen" class="screen active">
            <h1>English Master</h1>
            <p>AI-Powered English Learning Mission</p>
            <input type="text" id="username" placeholder="Nh·∫≠p H·ªç v√† T√™n">
            <input type="text" id="userclass" placeholder="Nh·∫≠p L·ªõp">
            <br>
            <button class="btn" onclick="checkLogin()">B·∫ÆT ƒê·∫¶U NHI·ªÜM V·ª§</button>
            <button class="btn" style="background: #444" onclick="switchScreen('admin-login-screen')">ADMIN</button>
        </div>

        <div id="game-screen" class="screen">
            <div class="hud">
                <div style="color:#ff4757">‚è∞ <span id="time-display">25:00</span></div>
                <div id="score-display">‚≠ê 0</div>
                <div style="color:#ffa502">üíé <span id="gem-display">0</span></div>
            </div>
            <h3 id="question-type" style="color:var(--secondary); font-size: 0.8rem;">TYPE</h3>
            <div id="question-text" style="background:rgba(0,0,0,0.4); padding:20px; border-radius:15px; margin-bottom:20px; font-size:1.2rem;">...</div>
            <div id="interaction-area"></div>
            <div id="feedback-msg" style="margin-top:15px; font-weight:bold; height:20px;"></div>
        </div>

        <div id="admin-login-screen" class="screen">
            <h2>X√°c th·ª±c Qu·∫£n tr·ªã</h2>
            <input type="password" id="admin-pass" placeholder="M·∫≠t kh·∫©u Admin">
            <button class="btn" onclick="validateAdmin()">TRUY C·∫¨P</button>
            <button class="btn" onclick="switchScreen('login-screen')">H·ª¶Y</button>
        </div>

        <div id="admin-panel" class="screen">
            <h2>Gi√°m s√°t H·ªá th·ªëng</h2>
            <div style="max-height: 300px; overflow-y: auto; background: rgba(0,0,0,0.3); border-radius: 10px;">
                <table class="monitor-table" id="monitor-table">
                    <thead><tr><th>User</th><th>Class</th><th>Action</th><th>Time</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
            <button class="btn" onclick="clearLogs()">X√ìA NH·∫¨T K√ù</button>
            <button class="btn" onclick="switchScreen('login-screen')">THO√ÅT</button>
        </div>

        <div id="result-screen" class="screen">
            <h2>Nhi·ªám v·ª• Ho√†n t·∫•t!</h2>
            <p>T·ªïng ƒëi·ªÉm: <span id="final-score">0</span></p>
            <button class="btn" onclick="location.reload()">L√ÄM L·∫†I</button>
        </div>
    </div>

    <script>
        // 1. NG√ÇN H√ÄNG C√ÇU H·ªéI (250 c√¢u) - R√∫t g·ªçn v√≠ d·ª•, b·∫°n copy paste th√™m t·ª´ danh s√°ch c≈© c·ªßa b·∫°n
        const questionBank = [
            { type: 'mcq', q: "She _______ her homework at the moment.", options: ["is doing", "does", "did", "has done"], a: "is doing" },
            { type: 'mcq', q: "We _______ this film three times already.", options: ["saw", "see", "have seen", "are seeing"], a: "have seen" },
     { question: "Choose the word with the underlined part pronounced differently: A. l<u>u</u>nch B. s<u>u</u>bject C. m<u>u</u>sic D. st<u>u</u>dy", options: ["lunch", "subject", "music", "study"], answer: 2 },
        { question: "Choose the word with the underlined part pronounced differently: A. ea<u>s</u>y B. pea<u>c</u>e C. <u>c</u>ity D. poli<u>c</u>e", options: ["easy", "peace", "city", "police"], answer: 0 },
        
        // --- T·ª´ v·ª±ng & Ng·ªØ ph√°p ---
        { question: "Listen! Someone _____ at the door.", options: ["knock", "knocks", "is knocking", "are knocking"], answer: 2 },
        { question: "My brother _____ judo every Tuesday and Thursday.", options: ["plays", "does", "studies", "has"], answer: 1 },
        { question: "We usually have _____ and milk for breakfast.", options: ["bread", "ruler", "compass", "calculator"], answer: 0 },
        { question: "There _____ a ceiling fan and two lamps in the living room.", options: ["is", "are", "have", "has"], answer: 0 },
        { question: "Don't be _____. You should share your toys with friends.", options: ["confident", "kind", "selfish", "active"], answer: 2 },
        { question: "Where is the cat? - It's _____ the table.", options: ["between", "under", "in", "next"], answer: 1 },
        { question: "Would you like _____ biscuits?", options: ["some", "any", "a", "an"], answer: 0 },
        { question: "Can you pass me the _____? I need to draw a circle.", options: ["ruler", "compass", "rubber", "pencil sharpener"], answer: 1 },
        { question: "Ha Long Bay is a famous natural _____ in Vietnam.", options: ["wonder", "island", "mountain", "river"], answer: 0 },
        { question: "You must _____ quiet in the library.", options: ["be", "to be", "being", "are"], answer: 0 },
        { question: "Tet is a time for family _____.", options: ["working", "cooking", "gatherings", "playing"], answer: 2 },
        { question: "Look at the sign! You _____ walk on the grass.", options: ["must", "mustn't", "can", "should"], answer: 1 },
        { question: "My house is _____ than your house.", options: ["big", "biger", "bigger", "more big"], answer: 2 },
        { question: "This is the _____ street in my town.", options: ["narrow", "narrower", "narrowest", "most narrow"], answer: 2 },
        { question: "How _____ apples do you need for the pie?", options: ["much", "many", "some", "any"], answer: 1 },
        { question: "My best friend has a round face and _____ hair.", options: ["long black", "black long", "short curly", "curly short"], answer: 2 },
        { question: "What are you doing _____ the moment?", options: ["in", "on", "at", "with"], answer: 2 },
        { question: "New York is very _____ with tall buildings and many people.", options: ["boring", "historic", "peaceful", "modern"], answer: 3 }
 
        // --- Ng·ªØ √¢m ---
        { question: "Choose the word with the different pronunciation: A. f<u>i</u>nd B. prov<u>i</u>de C. outs<u>i</u>de D. v<u>i</u>llage", options: ["find", "provide", "outside", "village"], answer: 3 },
        { question: "Choose the word with the different pronunciation: A. collect<u>ed</u> B. donat<u>ed</u> C. need<u>ed</u> D. wash<u>ed</u>", options: ["collected", "donated", "needed", "washed"], answer: 3 },

        // --- T·ª´ v·ª±ng & Ng·ªØ ph√°p ---
        { question: "She loves _____ photos of nature.", options: ["take", "taking", "takes", "took"], answer: 1 },
        { question: "Last year, our school _____ a lot of books to the mountainous areas.", options: ["send", "sends", "sent", "sending"], answer: 2 },
        { question: "Tofu is healthy because it has a lot of _____.", options: ["fat", "protein", "oil", "sugar"], answer: 1 },
        { question: "You should wash your hands _____ to prevent viruses.", options: ["regular", "regularly", "irregular", "good"], answer: 1 },
        { question: "How _____ water do you drink every day?", options: ["many", "much", "long", "often"], answer: 1 },
        { question: "My dad enjoys _____ his bike to work.", options: ["ride", "to ride", "riding", "rode"], answer: 2 },
        { question: "We _____ clean the streets because it was raining.", options: ["didn't", "don't", "won't", "aren't"], answer: 0 },
        { question: "The Japanese eat a lot of fish, _____ they live very long.", options: ["so", "because", "but", "or"], answer: 0 },
        { question: "Wait! I _____ with you to the station.", options: ["go", "will go", "went", "going"], answer: 1 },
        { question: "There isn't _____ milk left in the fridge.", options: ["some", "any", "a", "an"], answer: 1 },
        { question: "Classical music is not as exciting _____ rock music.", options: ["as", "than", "so", "more"], answer: 0 },
        { question: "Pho is a famous traditional _____ in Vietnam.", options: ["drink", "dish", "gift", "song"], answer: 1 },
        { question: "The puppet show takes _____ in a pool of water.", options: ["part", "place", "time", "action"], answer: 1 },
        { question: "We need _____ kilo of beef.", options: ["a", "an", "some", "half a"], answer: 3 },
        { question: "This painting is different _____ that one.", options: ["from", "with", "to", "for"], answer: 0 },
        { question: "Doing morning exercise is good _____ you.", options: ["at", "for", "in", "to"], answer: 1 },
        { question: "Green tea is a popular drink in Viet Nam. It helps _____ skin aging.", options: ["prevent", "start", "cause", "make"], answer: 0 },
        { question: "Find the odd one out:", options: ["Chapped lips", "Sunburn", "Acne", "Doughnut"], answer: 3 }
   
        // --- Ng·ªØ √¢m ---
        { question: "Choose the word with differnt stress pattern: A. 'leisure B. 'message C. re'lax D. 'puzzle", options: ["leisure", "message", "relax", "puzzle"], answer: 2 },
        
        // --- T·ª´ v·ª±ng & Ng·ªØ ph√°p ---
        { question: "Mai enjoys _____ crafts, especially bracelets.", options: ["making", "doing", "creating", "working"], answer: 0 },
        { question: "Life in the countryside is _____ than in the city.", options: ["peaceful", "more peaceful", "most peaceful", "less peaceful"], answer: 1 },
        { question: "Farmers have to work _____ on the farm during harvest time.", options: ["hard", "harder", "hardly", "badly"], answer: 1 },
        { question: "It's harvest time, so the villagers are busy _____ rice.", options: ["collecting", "growing", "planting", "drying"], answer: 0 },
        { question: "We usually _____ our shoes when we enter a Japanese house.", options: ["take off", "put on", "turn off", "look after"], answer: 0 },
        { question: "If you study hard, you _____ the exam.", options: ["pass", "will pass", "passed", "would pass"], answer: 1 },
        { question: "Unless you _____ quiet, the baby will wake up.", options: ["keep", "don't keep", "are", "aren't"], answer: 0 },
        { question: "The Gong Festival is held _____ in the Central Highlands.", options: ["year", "annual", "annually", "anniversary"], answer: 2 },
        { question: "Using smartphones too much can lead to lack _____ sleep.", options: ["of", "in", "on", "with"], answer: 0 },
        { question: "Teens often feel _____ when they have too much homework.", options: ["relaxing", "stressed", "delighted", "happy"], answer: 1 },
        { question: "Can you tell me _____ to cook sticky rice?", options: ["what", "how", "why", "who"], answer: 1 },
        { question: "She speaks English _____ than her sister.", options: ["fluent", "more fluently", "most fluently", "fluently"], answer: 1 },
        { question: "There are 54 _____ groups in Vietnam.", options: ["ethnic", "ethnicity", "cultural", "native"], answer: 0 },
        { question: "The communal house (Nha Rong) is used for village _____.", options: ["meetings", "sleeping", "market", "farming"], answer: 0 },
        { question: "Don't worry! I will _____ the children while you are away.", options: ["look for", "look after", "look up", "look at"], answer: 1 },
        { question: "This is the _____ beautiful terraced field I have ever seen.", options: ["more", "most", "very", "less"], answer: 1 },
        { question: "I'm interested _____ herding buffaloes.", options: ["in", "on", "at", "of"], answer: 0 },
        { question: "Would you mind _____ the window?", options: ["open", "opening", "to open", "opened"], answer: 1 }
   
        // --- Ng·ªØ √¢m ---
        { question: "Choose the word with different stress: A. 'artisan B. at'traction C. 'handicraft D. 'pottery", options: ["artisan", "attraction", "handicraft", "pottery"], answer: 1 },

        // --- T·ª´ v·ª±ng & Ng·ªØ ph√°p ---
        { question: "We went to Bat Trang village to buy some _____.", options: ["paintings", "pottery", "jewellery", "wool"], answer: 1 },
        { question: "This park _____ a lot of visitors every year.", options: ["attracts", "interests", "makes", "does"], answer: 0 },
        { question: "I wish I _____ fly to the moon.", options: ["can", "will", "could", "am"], answer: 2 },
        { question: "He used to _____ football when he was small.", options: ["play", "playing", "played", "plays"], answer: 0 },
        { question: "The museum _____ in 1990.", options: ["built", "was built", "is built", "has been built"], answer: 1 },
        { question: "Ha Long Bay has been recognized _____ UNESCO as a World Heritage Site.", options: ["by", "with", "for", "of"], answer: 0 },
        { question: "You should take your shoes off before _____ the house.", options: ["enter", "entering", "entered", "to enter"], answer: 1 },
        { question: "My mother told me to _____ giving up.", options: ["go on", "keep on", "turn on", "put on"], answer: 1 },
        { question: "I suggest _____ to the cinema tonight.", options: ["go", "going", "to go", "went"], answer: 1 },
        { question: "The girl _____ is standing there is my sister.", options: ["who", "whom", "which", "whose"], answer: 0 },
        { question: "If I _____ you, I would study harder.", options: ["am", "was", "were", "been"], answer: 2 },
        { question: "She asked me where I _____ from.", options: ["come", "came", "coming", "to come"], answer: 1 },
        { question: "They have lived here _____ 10 years.", options: ["since", "for", "in", "at"], answer: 1 },
        { question: "This is the best book _____ I have ever read.", options: ["who", "which", "that", "whom"], answer: 2 },
        { question: "Despite _____ tired, he finished his homework.", options: ["be", "being", "is", "was"], answer: 1 },
        { question: "City life is often more _____ than country life.", options: ["stress", "stressful", "stressed", "stressing"], answer: 1 },
        { question: "We need to preserve our _____ heritage.", options: ["culture", "cultural", "cultured", "culturally"], answer: 1 },
        { question: "He doesn't know _____ to deal with this problem.", options: ["what", "how", "when", "why"], answer: 1 },
        { question: "Before 1990, people in my village _____ live in mud houses.", options: ["use to", "used to", "get used to", "are used to"], answer: 1 }
];

        // 2. BI·∫æN TO√ÄN C·ª§C
        let currentUser = { name: "", class: "" };
        let score = 0; let gems = 0;
        let currentQuestions = []; let qIndex = 0;
        let timer; let timeLeft = 1500;
        let userLogs = JSON.parse(localStorage.getItem('cyberLogs')) || [];

        // 3. AI LOGIC (T∆∞∆°ng t√°c m·∫°nh h∆°n)
        function aiSpeak(type, customText = "") {
            const bot = document.getElementById('ai-bot');
            const content = document.getElementById('ai-content');
            bot.style.display = 'block';
            
            let message = "";
            const name = currentUser.name;

            switch(type) {
                case 'welcome': message = `Ch√†o ${name}! T√¥i ƒë√£ n·∫°p d·ªØ li·ªáu b√†i t·∫≠p cho l·ªõp ${currentUser.class}. S·∫µn s√†ng ch∆∞a?`; break;
                case 'correct': 
                    const praise = ["Tuy·ªát ƒë·ªânh!", "Qu√° chu·∫©n!", "ƒê√∫ng r·ªìi ƒë√≥!"];
                    message = `${praise[Math.floor(Math.random()*praise.length)]} B·∫°n ƒë√£ ƒë·∫°t ${score} ƒëi·ªÉm.`;
                    break;
                case 'wrong': message = `Ti·∫øc qu√° ${name} ∆°i. H√£y xem l·∫°i c·∫•u tr√∫c n√†y nh√©. ƒê·ª´ng b·ªè cu·ªôc!`; break;
                case 'streak': message = `WOW! ${name} ƒëang c√≥ chu·ªói tr·∫£ l·ªùi ƒë√∫ng r·∫•t ·∫•n t∆∞·ª£ng!`; break;
                case 'hint': message = customText; break;
                case 'finish': message = `Ch√∫c m·ª´ng ${name}! B·∫°n ƒë√£ ho√†n th√†nh xu·∫•t s·∫Øc nhi·ªám v·ª• h√¥m nay.`; break;
            }
            content.innerText = message;
            
            // Hi·ªáu ·ª©ng nh√°y ƒë√®n AI
            document.getElementById('bot-status').style.color = '#2ed573';
            setTimeout(() => { document.getElementById('bot-status').style.color = '#00d2ff'; }, 1000);
        }

        // 4. H·ªÜ TH·ªêNG QU·∫¢N TR·ªä & THEO D√ïI
        function logAction(act) {
            userLogs.push({ user: currentUser.name, class: currentUser.class, action: act, time: new Date().toLocaleTimeString() });
            localStorage.setItem('cyberLogs', JSON.stringify(userLogs));
        }

        function validateAdmin() {
            if (document.getElementById('admin-pass').value === "123456") {
                switchScreen('admin-panel');
                const tbody = document.querySelector('#monitor-table tbody');
                tbody.innerHTML = userLogs.map(l => `<tr><td>${l.user}</td><td>${l.class}</td><td>${l.action}</td><td>${l.time}</td></tr>`).reverse().join('');
            } else { alert("Sai m·∫≠t kh·∫©u!"); }
        }

        // 5. GAME LOGIC
        function switchScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function checkLogin() {
            const n = document.getElementById('username').value;
            const c = document.getElementById('userclass').value;
            if (n && c) {
                currentUser = { name: n, class: c };
                logAction("ƒêƒÉng nh·∫≠p");
                aiSpeak('welcome');
                setTimeout(startGame, 1500);
            } else { alert("Nh·∫≠p t√™n v√† l·ªõp!"); }
        }

        function startGame() {
            switchScreen('game-screen');
            currentQuestions = questionBank.sort(() => 0.5 - Math.random()).slice(0, 20);
            loadQuestion();
            startTimer();
        }

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                let m = Math.floor(timeLeft/60); let s = timeLeft%60;
                document.getElementById('time-display').innerText = `${m}:${s<10?'0'+s:s}`;
                if(timeLeft <= 0) endGame();
            }, 1000);
        }

        function loadQuestion() {
            const q = currentQuestions[qIndex];
            document.getElementById('question-type').innerText = `C√ÇU ${qIndex+1}/20 - ${q.type.toUpperCase()}`;
            document.getElementById('question-text').innerText = q.q;
            const area = document.getElementById('interaction-area');
            area.innerHTML = "";
            
            if(q.type === 'mcq') {
                const grid = document.createElement('div');
                grid.className = 'options-grid';
                q.options.forEach(opt => {
                    const btn = document.createElement('div');
                    btn.className = 'option-card';
                    btn.innerText = opt;
                    btn.onclick = () => checkAnswer(opt, q.a);
                    grid.appendChild(btn);
                });
                area.appendChild(grid);
            }
        }

        function checkAnswer(user, correct) {
            const feedback = document.getElementById('feedback-msg');
            if (user === correct) {
                score += 10; feedback.innerText = "CH√çNH X√ÅC!"; feedback.style.color = "#2ed573";
                aiSpeak('correct');
                logAction(`ƒê√∫ng c√¢u ${qIndex+1}`);
            } else {
                feedback.innerText = "SAI R·ªíI!"; feedback.style.color = "#ff4757";
                aiSpeak('wrong');
                logAction(`Sai c√¢u ${qIndex+1}`);
            }
            
            setTimeout(() => {
                qIndex++;
                if(qIndex < currentQuestions.length) loadQuestion();
                else endGame();
            }, 1500);
        }

        function endGame() {
            clearInterval(timer);
            switchScreen('result-screen');
            document.getElementById('final-score').innerText = score;
            aiSpeak('finish');
            logAction(`Ho√†n th√†nh v·ªõi ${score} ƒëi·ªÉm`);
        }

        function clearLogs() { localStorage.removeItem('cyberLogs'); location.reload(); }
    </script>
</body>
</html>
